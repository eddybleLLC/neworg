this.wdg=this.wdg||{},this.wdg.marketingcloud=function(){"use strict";class e{constructor(e){this.node=e,this.node&&(this.emailField=e.querySelector('input[name="EmailAddress"]'),this.firstNameField=e.querySelector('input[name="FirstName"]'),this.lastNameField=e.querySelector('input[name="LastName"]'),this.countryField=e.querySelector('select[name="Country"]'),e.addEventListener("submit",this.handleFormSubmit.bind(this)))}isEmailValid=e=>/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e);isRequired=e=>""!==e;showError=(e,t)=>{const s=e.parentElement;s.classList.remove("success"),s.classList.add("error");s.querySelector("small").textContent=t};showSuccess=e=>{const t=e.parentElement;t.classList.remove("error"),t.classList.add("success");t.querySelector("small").textContent=""};checkEmail=()=>{let e=!1;const t=this.emailField.value.trim();return this.isRequired(t)?this.isEmailValid(t)?(this.showSuccess(this.emailField),e=!0):this.showError(this.emailField,"Email is not valid. Please check the address."):this.showError(this.emailField,"Email cannot be blank."),e};checkFirstName=()=>{let e=!1;const t=this.firstNameField.value.trim();return this.isRequired(t)?(this.showSuccess(this.firstNameField),e=!0):this.showError(this.firstNameField,"First name cannot be blank."),e};checkLastName=()=>{let e=!1;const t=this.lastNameField.value.trim();return this.isRequired(t)?(this.showSuccess(this.lastNameField),e=!0):this.showError(this.lastNameField,"Last name cannot be blank."),e};checkCountry=()=>{let e=!1;const t=this.countryField.value.trim();return this.isRequired(t)?(this.showSuccess(this.countryField),e=!0):this.showError(this.countryField,"Please select a country."),e};handleFormSubmit(e){e.preventDefault();let t=this.checkEmail(),s=this.checkFirstName(),i=this.checkLastName(),r=this.checkCountry(),a=t&&s&&i&&r,o=e.target.querySelector(".error");if(o&&o.querySelector(".email-signup__field").focus(),a){const t=new FormData(e.target),s=Object.fromEntries(t.entries()),i=e.target.querySelector(".email-signup--error");let r=e.submitter;r.value="Processing",r.disabled=!0,fetch(e.target.action,{method:"POST",body:JSON.stringify(s),headers:{"Content-type":"application/json; charset=UTF-8"}}).then((e=>{if(e.ok)return e.json();throw 500===e.status?new Error("There was a problem with the server. Please try again later."):new Error("There was a problem submitting the form.")})).then((t=>{t.message.includes("Contact already exists")?(r.value="Subscribe",r.disabled=!1,i.classList.add("has-error"),i.innerHTML="<p>This email address has already been submitted. Please check your inbox to finish the subscription process or to access your personal preference center to make updates.</p>"):(e.target.insertAdjacentHTML("beforebegin",'<p class="email-signup--success">Thank you. To complete the subscription process, please click the link in the email we just sent you.</p>'),e.target.style.display="none")})).catch((e=>{console.log(e),r.value="Subscribe",r.disabled=!1,i.classList.add("has-error"),i.innerHTML='<p>There was a problem submitting this form. Please contact <a href="mailto:office-of-communications@fordfoundation.org">office-of-communications@fordfoundation.org</a> for assistance.</p>'}))}}}return e.instances=Array.from(document.querySelectorAll(".email-signup")).map((t=>new e(t))),e}();
//# sourceMappingURL=marketingcloud.min.js.map
